"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[644],{5644:function(e,t,a){a.r(t),a.d(t,{default:function(){return M}});var s=a(7437),r=a(2265),l=a(4264),o=a(6777),n=a(7954),i=a(2143),c=a(4307),d=a(359),u=a(7776),m=a(9938),p=a(7174);let f={"/models/FemaleHoodie/female_cloth1.glb":{targetSize:2.5,groundOffset:-6,xOffset:0,yOffset:5.5,zOffset:0},default:{targetSize:3,groundOffset:-1,xOffset:0,yOffset:0,zOffset:0}};function h(e){let{modelColor:t}=e,a=(0,r.useRef)(null);return(0,l.F)(e=>{if(a.current){a.current.rotation.y=.2*Math.sin(.5*e.clock.elapsedTime);let t=1+.1*Math.sin(2*e.clock.elapsedTime);a.current.scale.set(t,t,t)}}),(0,s.jsxs)("group",{ref:a,position:[0,0,0],children:[(0,s.jsxs)("mesh",{position:[0,0,0],castShadow:!0,receiveShadow:!0,children:[(0,s.jsx)("boxGeometry",{args:[1.2,1.8,.4]}),(0,s.jsx)("meshStandardMaterial",{color:t,roughness:.7,metalness:.1})]}),(0,s.jsxs)("mesh",{position:[-.8,.5,0],castShadow:!0,receiveShadow:!0,children:[(0,s.jsx)("boxGeometry",{args:[.4,.8,.4]}),(0,s.jsx)("meshStandardMaterial",{color:t,roughness:.7,metalness:.1})]}),(0,s.jsxs)("mesh",{position:[.8,.5,0],castShadow:!0,receiveShadow:!0,children:[(0,s.jsx)("boxGeometry",{args:[.4,.8,.4]}),(0,s.jsx)("meshStandardMaterial",{color:t,roughness:.7,metalness:.1})]})]})}function x(e){let{modelPath:t,modelColor:a,stickers:o,setShadowFloor:n,onModelLoad:i,onProgress:c,animation:d="none",animationSpeed:x=2,modelConfig:g}=e,M=(0,r.useRef)(null),[w,j]=(0,r.useState)(null),v=(0,r.useRef)(new Map);return(0,l.F)(e=>{if(M.current&&w)switch(d){case"pulse":let t=1+.1*Math.sin(2*e.clock.elapsedTime*x);M.current.scale.set(t,t,t);break;case"bounce":let a=.3*Math.abs(Math.sin(2*e.clock.elapsedTime*x));M.current.position.y=a,M.current.scale.set(1,1,1);break;case"shake":let s=.05*Math.sin(10*e.clock.elapsedTime*x);M.current.position.x=s,M.current.position.y=0,M.current.scale.set(1,1,1);break;case"swing":let r=.3*Math.sin(1.5*e.clock.elapsedTime*x);M.current.rotation.z=r,M.current.position.set(0,0,0),M.current.scale.set(1,1,1);break;case"spin":M.current.rotation.y+=.02*x,M.current.position.set(0,0,0),M.current.scale.set(1,1,1);break;default:M.current.position.set(0,0,0),M.current.rotation.set(0,0,0),M.current.scale.set(1,1,1)}}),(0,r.useEffect)(()=>{let e=new m.E,a=new p._;return a.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.7/"),e.setDRACOLoader(a),e.load(t,e=>{let a=e.scene,s=g||f[t]||f.default,r=new u.Box3().setFromObject(a).getSize(new u.Vector3),l=Math.max(r.x,r.y,r.z)||1,o=(s.targetSize||3)/l;a.scale.set(o,o,o);let d=new u.Box3().setFromObject(a),m=d.getCenter(new u.Vector3),p=d.min.y;a.position.x=-m.x+(s.xOffset||0),a.position.z=-m.z+(s.zOffset||0);let h=-p+(s.groundOffset||0)+(s.yOffset||0);a.position.y=h,n&&n(h+.02),a.traverse(e=>{if(!e.isMesh||!e.material)return;let t=e.material;v.current.set(e,{map:t.map||null,normalMap:t.normalMap||null,roughnessMap:t.roughnessMap||null,metalnessMap:t.metalnessMap||null,aoMap:t.aoMap||null,emissiveMap:t.emissiveMap||null,color:t.color?t.color.clone():new u.Color("#ffffff")})}),j(a),c&&c(100),i&&i()},e=>{e.lengthComputable&&c&&c(Math.min(e.loaded/e.total*100,99))},e=>{console.error("Model load error",e)}),()=>{a.dispose()}},[t]),(0,r.useEffect)(()=>{w&&w.traverse(e=>{var t;if(!e.isMesh||!e.material)return;let s=v.current.get(e);if(!s)return;let r=null===(t=s.map)||void 0===t?void 0:t.image,l=r&&r.width?r.width:2048,n=r&&r.height?r.height:l,i=document.createElement("canvas");i.width=l,i.height=n;let c=i.getContext("2d");if(!c)return;if(a&&"reset"!==a&&"original"!==a)c.fillStyle=a,c.fillRect(0,0,l,n);else if(r)try{c.drawImage(r,0,0,l,n)}catch(e){c.fillStyle=s.color.getStyle(),c.fillRect(0,0,l,n)}else c.fillStyle=s.color.getStyle(),c.fillRect(0,0,l,n);let d=e=>new Promise(t=>{let a=new Image;a.crossOrigin="anonymous",a.onload=()=>{var s,r,o;let i=(null!==(s=e.scale)&&void 0!==s?s:.15)*Math.max(l,n),d=null!==(r=e.aspectRatio)&&void 0!==r?r:a.width/a.height||1,u=i,m=i;d>1?(u=i,m=i/d):(m=i,u=i*d);let p=e.uvX*l-u/2,f=(1-e.uvY)*n-m/2;c.save();let h=p+u/2,x=f+m/2,g=(null!==(o=e.rotation)&&void 0!==o?o:0)*Math.PI/180;c.translate(h,x),c.rotate(g),c.drawImage(a,-u/2,-m/2,u,m),c.restore(),t()},a.onerror=()=>{console.warn("Sticker image failed to load during bake",e.src),t()},a.src=e.src});(async()=>{for(let e=0;e<o.length;e++)o[e]&&await d(o[e]);let t=new u.CanvasTexture(i);try{t.colorSpace=u.SRGBColorSpace||u.SRGBColorSpace}catch(e){}t.flipY=!1,t.needsUpdate=!0,e.material.map=t,e.material.normalMap=s.normalMap,e.material.roughnessMap=s.roughnessMap,e.material.metalnessMap=s.metalnessMap,e.material.aoMap=s.aoMap,e.material.emissiveMap=s.emissiveMap,e.material.color=new u.Color("#ffffff"),e.material.needsUpdate=!0})()})},[w,o,a]),(0,r.useEffect)(()=>{w&&"reset"===a&&w.traverse(e=>{if(!e.isMesh||!e.material)return;let t=v.current.get(e);t&&(e.material.map=t.map,e.material.normalMap=t.normalMap,e.material.roughnessMap=t.roughnessMap,e.material.metalnessMap=t.metalnessMap,e.material.aoMap=t.aoMap,e.material.emissiveMap=t.emissiveMap,e.material.color=t.color.clone(),e.material.needsUpdate=!0)})},[a,w]),(0,s.jsx)("group",{ref:M,children:w?(0,s.jsx)("primitive",{object:w}):(0,s.jsx)(h,{modelColor:a})})}function g(e){let{texture:t,rotationSpeed:a,shouldRotate:o,autoRotate:n}=e,i=(0,r.useRef)(null);return(0,l.F)(()=>{i.current&&n&&(o||(i.current.rotation.y-=2*Math.PI/60/60*a))}),(0,s.jsxs)("mesh",{ref:i,scale:[-1,1,1],children:[(0,s.jsx)("sphereGeometry",{args:[500,60,40]}),(0,s.jsx)("meshBasicMaterial",{map:t,side:u.BackSide})]})}function M(e){let{modelPath:t,modelColor:a,stickers:l,backgroundColor:m="#212121",environmentBg:p=null,rotateBackground:f=!1,onModelLoad:h,autoRotate:M=!1,rotationSpeed:w=2,animation:j="none",animationSpeed:v=2,animateBackground:b=!1,modelConfig:S}=e,[y,k]=(0,r.useState)(0),[R,O]=(0,r.useState)(null),[C,N]=(0,r.useState)(!0),[z,E]=(0,r.useState)(0);return(0,r.useEffect)(()=>{if(!p){O(null);return}new u.TextureLoader().load(p,e=>{e.mapping=u.EquirectangularReflectionMapping,e.colorSpace=u.SRGBColorSpace,O(e)},void 0,e=>{console.error("Failed to load environment texture:",e),O(null)})},[p]),(0,r.useEffect)(()=>{N(!0),E(0)},[t]),(0,s.jsxs)("div",{className:"w-full h-full relative",children:[C&&(0,s.jsx)("div",{className:"absolute inset-0 z-10 flex items-center justify-center pointer-events-none",children:(0,s.jsx)("div",{className:"bg-black/50 backdrop-blur-sm px-8 py-6 rounded-lg shadow-2xl",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-6 h-6 border-3 border-white border-t-transparent rounded-full animate-spin"}),(0,s.jsxs)("span",{className:"text-white text-lg font-medium",children:["The model is loading",(0,s.jsxs)("span",{className:"loading-dots inline-block w-8 text-left ml-0.5",children:[(0,s.jsx)("span",{children:"."}),(0,s.jsx)("span",{children:"."}),(0,s.jsx)("span",{children:"."})]})]})]}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-1",children:(0,s.jsxs)("span",{className:"text-white/70 text-sm",children:[z,"%"]})}),(0,s.jsx)("div",{className:"w-64 h-2 bg-white/20 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 transition-all duration-300 ease-out",style:{width:"".concat(z,"%")}})})]})]})})}),(0,s.jsxs)(o.Xz,{shadows:!0,children:[!R&&(0,s.jsx)("color",{attach:"background",args:[m]}),(0,s.jsx)(n.c,{makeDefault:!0,position:[0,0,5]}),(0,s.jsx)("ambientLight",{intensity:.5}),(0,s.jsx)("spotLight",{position:[10,10,10],intensity:1,castShadow:!0}),(0,s.jsx)("pointLight",{position:[-10,-10,-10],intensity:.5}),R&&(0,s.jsx)(g,{texture:R,rotationSpeed:"none"!==j?v:w,shouldRotate:"none"!==j?b:f,autoRotate:"none"!==j||M}),(0,s.jsx)(x,{modelPath:t,modelColor:a,stickers:l,setShadowFloor:k,onModelLoad:()=>{N(!1),E(100),null==h||h()},onProgress:e=>{E(Math.round(e))},animation:j,animationSpeed:v,modelConfig:S}),(0,s.jsx)(i.qA,{preset:"studio"}),(0,s.jsx)(c.j,{position:[0,y,0],scale:12,opacity:.5,blur:2,far:15}),(0,s.jsx)(d.z,{enablePan:!0,enableZoom:!0,enableRotate:!0,autoRotate:M,autoRotateSpeed:w})]})]})}}}]);